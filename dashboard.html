<!-- dashboard.html (病患等候區顯示) -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>診間看診看板</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 30px; text-align: center; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .card h2 { margin: 10px 0; }
    .card .status { font-size: 1.5em; color: #2e86de; }
  </style>
</head>
<body>
  <h1>目前各診間看診進度</h1>
  <div class="grid" id="dashboard"></div>

  <script>
    const today = new Date().toISOString().slice(0, 10);
    const session = getCurrentSession();

    const doctors = [
      { id: "10001", name: "王大明", dept: "內科" },
      { id: "10002", name: "李小美", dept: "內科" },
      { id: "10003", name: "陳建志", dept: "外科" },
      { id: "10004", name: "黃玉婷", dept: "外科" },
      { id: "10005", name: "張志偉", dept: "耳鼻喉科" },
      { id: "10006", name: "林怡君", dept: "耳鼻喉科" }
    ];

    const container = document.getElementById("dashboard");

    doctors.forEach(doc => {
      const key = `progress_${doc.id}_${today}_${session}`;
      const current = parseInt(localStorage.getItem(key) || "1", 10);
      const next = current + 1;

      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h2>${doc.name}（${doc.dept}）</h2>
        <div class="status">請第 ${next} 號準備</div>
      `;
      container.appendChild(card);
    });

    function getCurrentSession() {
      const h = new Date().getHours();
      if (h < 12) return "morning";
      if (h < 17) return "afternoon";
      return "evening";
    }
  </script>
</body>
</html>